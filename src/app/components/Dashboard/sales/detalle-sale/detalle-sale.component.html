<app-sidebar></app-sidebar>
<!-- Page title-->
<div class="border-bottom pt-5 mt-2 mb-5" style="margin-left:15%;">
    <h1 class="mt-2 mt-md-4 mb-3 pt-5">Ventas</h1>
    <div class="d-flex flex-wrap flex-md-nowrap justify-content-between">
      <p class="text-muted">Este m칩dulo lista todas las ventas de la tienda.</p>
      
    </div>
</div>

<div class="card box-shadow-sm" style="margin-left: 14.2%;">
    <div class="card-header">
        <h5 style="margin-bottom: 0px;">Filtro de ventas</h5>
    </div>
    <div class="card-body ">
      <div class="row">
        <div class="col-12 mb-4">
            <div class="card card-body py-3 box-shadow ">
              <div class="row">
                <div class="col-lg-6">
                  <table class="table mb-0">
                    <tbody>
                        <tr>
                            <th class="border-0 py-2 pl-0">Cliente</th>
                            <td class="border-0 py-2 px-0 text-muted">{{orders.user.name}} {{orders.user.lastname}}</td>
                       </tr>
                      <tr>
                        <th class="border-0 py-2 pl-0">Order No:</th>
                        <td class="border-0 py-2 px-0 text-muted">{{orders.transaction}}</td>
                      </tr>
                      <tr>
                        <th class="border-0 py-2 pl-0">Shipment:</th>
                        <td class="border-0 py-2 px-0 text-muted">{{orders.envio_title}}</td>
                      </tr>
                      <tr>
                        <th class="border-0 py-2 pl-0">Shipped on:</th>
                        <td class="border-0 py-2 px-0 text-muted"> {{orders.createdDate|date}}</td>
                      </tr>
                     
                    </tbody>
                  </table>
                </div>
                <div class="col-lg-6">
                  <table class="table mb-0">
                    <tbody>
                        <tr>
                            <th class="border-0 py-2 pl-0">Price Envio:</th>
                            <td class="border-0 py-2 px-0 text-muted">{{orders.envio_price}}</td>
                        </tr>
                      <tr *ngIf="orders.coupon != undefined">
                        <th class="border-0 py-2 pl-0">Coupon:</th>
                        <td class="border-0 py-2 px-0 text-muted">{{orders.coupon}}</td>
                      </tr>
                      <tr *ngIf="orders.coupon == undefined">
                          <th class="border-0 py-2 pl-0">Cuopon:</th>
                          <td class="border-0 py-2 px-0 text-muted">N/A</td>
                        </tr>
                      <tr>
                        <th class="border-0 py-2 pl-0">Country:</th>
                        <td class="border-0 py-2 px-0 text-muted">{{orders.address.country}}</td>
                      </tr>
                      <tr>
                        <th class="border-0 py-2 pl-0">Status:</th>
                        <td class="border-0 py-2 px-0 text-muted">
                          <span *ngIf="orders.state === 'procesando'" class="badge badge-primary mb-3">{{orders.state}}</span>
                        </td>
                        <td class="border-0 py-2 px-0 text-muted">
                          <span *ngIf="orders.state === 'En Tr치nsito'" class="badge badge-warning mb-3">{{orders.state}}</span>
                        </td>
                        <td class="border-0 py-2 px-0 text-muted">
                          <span *ngIf="orders.state === 'Entregado'" class="badge badge-success mb-3">{{orders.state}}</span>
                        </td>
                        <td class="border-0 py-2 px-0 text-muted">
                          <span *ngIf="orders.state === 'Cancelado'" class="badge badge-danger mb-3">{{orders.state}}</span>
                        </td>
                      </tr>
                      
                    </tbody>
                  </table>
                </div>
              </div>
              
            </div>
          </div>
          <div class="col-12">
              <div class="card mb-3">
                  <div class="card-body">
                        <div class="card-header">
                            <strong>Direcci칩n de Envio</strong>
                        </div>
                    <div class="row"  >
                          <div class="col-md-3 col-sm-4 mb-sm0 mb-3">
                            <h3 class="mb-2 font-size-sm text-muted">{{orders.address.addressee}}</h3>
                            <span class="d-block mt-3 font-size-sm text-muted">{{orders.address.zip}}</span>
                            <a class="badge badge-success mt-3" >Direcci칩n de envio</a>
                          </div>
                          <div class="col">
                              <p class="mb-3">{{orders.user.address}}</p>
                              <span class="d-block mb-3 font-size-sm text-muted">{{orders.address.phone}}</span>
                          </div>
                        </div>
                      </div>
                  
                    </div>
          </div>
      </div>
          
          <div class="card border-bottom">
            <div id="order-1" class="collapse show" data-parent="#orders">
              <div class="bg-secondary rounded mb-4">
                <div class="table-responsive">
                  <table class="table mb-0">
                    <tbody>
                      <tr *ngFor="let product of products">
                        <td class="border-top-0">
                          <div class="media pl-2 py-2">
                            <a  style="min-width: 80px;">
                                <img src="https://ecommercewebde.blob.core.windows.net/ecommerce/{{product.products.frontpage}}"  width="80" alt="Product thumb">
                            </a>
                            <div class="media-body pl-3">
                              <h3 class="font-size-sm mb-3">
                                <a href="shop-single.html" class="nav-link font-weight-bold">{{product.products.title}}</a>
                              </h3>
                            </div>
                          </div>
                        </td>
                        <td class="border-top-0">
                          <div class="py-2">
                            <div class="font-size-xs text-muted mb-1">Price:</div>
                            <div class="font-size-sm text-dark">${{product.products.price}}</div>
                          </div>
                        </td>
                        <td class="border-top-0">
                          <div class="py-2">
                            <div class="font-size-xs text-muted mb-1">Quantity:</div>
                            <div class="font-size-sm text-dark">{{product.amount}}</div>
                          </div>
                        </td>
                        <td class="border-top-0">
                          <div class="py-2 pr-3 text-right">
                            <div class="font-size-xs text-muted mb-1">Subtotal:</div>
                            <div class="font-size-sm font-weight-bold text-dark">${{product.subtotal}}</div>
                          </div>
                        </td>
                      </tr>
                     
                      <tr>
                        <td>
                          <div class="py-3">
                            <span class="font-size-xs text-muted">Shipping: </span>
                            <span class="font-size-sm text-dark">${{orders.envio_price}}</span>
                          </div>
                        </td>
                        <td>
                            <div class="py-3">
                            </div>
                          </td>
                          <td>
                            <div class="py-3">
                            </div>
                          </td>
                        <td>
                          <div class="py-3 pr-5 text-right ">
                            <span class="font-size-xs text-muted">Total: </span>
                            <span class="font-size-sm font-weight-bold text-dark">${{orders.subtotal}}</span>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="d-flex justify-content-end align-items-center mb-4">
                <a [routerLink]="['/index/sales']" class="btn btn-outline-primary btn-sm mr-3">Regresar</a>
                <a *ngIf="orders.state === 'procesando'" (click)="enviar_pedido(orders.id)" class="btn btn-outline-primary btn-sm mr-3">Enviar Pedido</a>
            </div>
            </div>
          </div>
    </div>
</div> 